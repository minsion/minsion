import{E as s,V as a,W as e,X as t,s as i,Y as o,n as l,h as n,c as d,w as r,i as c,o as h,a as p,x as u,b as w,t as m,j as x,d as f,k}from"./index-CE7gXyKD.js";import{r as g,_}from"./watermark.Dpp_Cumi.js";import{_ as b}from"./uni-icons.tBNBx2EM.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const C=y({data:()=>({show:!1,isOpened:!1,showCard:!1,detail:""}),onLoad:function(){this.music=s(),this.music.src="../../static/shake.wav",a(),e((s=>{this.show||Math.abs(s.x)+Math.abs(s.y)+Math.abs(s.z)>20&&!this.show&&this.isOpened&&(this.music.play(),this.showCard=!1,this.show=!0,t({type:"wgs84",success:s=>{this.$http.request({url:"/shake/doShake",method:"POST",data:JSON.stringify({longitude:s.longitude,latitude:s.latitude}),success:s=>{200==s.data.code&&(this.detail=s.data.data,setTimeout((()=>{this.showCard=!0}),400))}})},fail:s=>{i({title:"请检查定位是否开启",icon:"none",position:"bottom"}),console.log(s.errMsg)},complete:s=>{setTimeout((()=>{this.show=!1}),300)}}))}))},onShow(){this.isOpened=!0},onUnload(){this.show=!1,this.isOpened=!1,o(),this.music.destroy()},methods:{goAddfriend(s){l({url:"../personInfo/detail?param="+s.userId+"&source=5"})}}},[["render",function(s,a,e,t,i,o){const l=g(n("watermark"),_),y=f,C=k,O=c,v=g(n("uni-icons"),b);return h(),d(O,{class:"wxshake"},{default:r((()=>[p(l),p(O,{class:"wxshake-box"},{default:r((()=>[p(y,{class:"wxshake-img",src:"/assets/y01-C7IpaRCU.png",mode:"aspectFill"}),p(O,{class:u(["wxshake-open-box",{"wxshake-open":i.show}])},{default:r((()=>[p(y,{class:"wxshake-open-img",src:"/assets/y03-ob1pD_gs.png",mode:"aspectFill"}),p(C,{class:"wxshake-open-text"},{default:r((()=>[w("正在搜寻统一时刻摇晃手机的人")])),_:1})])),_:1},8,["class"]),p(y,{class:"wxshake-img",src:"/assets/y02-rQOP-PXp.png",mode:"aspectFill"})])),_:1}),i.showCard?(h(),d(O,{key:0,class:"wxshake-card",onClick:a[1]||(a[1]=s=>o.goAddfriend(i.detail))},{default:r((()=>[p(O,{class:"person-wx-user"},{default:r((()=>[p(y,{class:"person-wx-avatar",onClick:a[0]||(a[0]=a=>s.$fc.previewImagesolo(i.detail.portrait)),src:i.detail.portrait,mode:"aspectFill"},null,8,["src"]),p(O,{class:"person-wx-user-detail"},{default:r((()=>[p(O,{class:"person-wx-nikename"},{default:r((()=>[p(C,{class:"text"},{default:r((()=>[w(m(i.detail.nickName),1)])),_:1}),"0"==i.detail.gender?(h(),d(O,{key:0,class:u(["wxfont person-wx-nikename-icon",{nv:"0"==i.detail.gender}])},null,8,["class"])):x("",!0),"1"==i.detail.gender?(h(),d(O,{key:1,class:u(["wxfont person-wx-nikename-icon",{nan:"1"==i.detail.gender}])},null,8,["class"])):x("",!0)])),_:1}),p(C,{class:"person-wx-name"},{default:r((()=>[w(" 相距"+m(i.detail.distance)+m(i.detail.distanceUnit),1)])),_:1})])),_:1}),p(v,{class:"xw-tool-right",type:"right",size:"18",color:"#b5b5b5"})])),_:1})])),_:1})):x("",!0)])),_:1})}],["__scopeId","data-v-9b38ebe0"]]);export{C as default};
