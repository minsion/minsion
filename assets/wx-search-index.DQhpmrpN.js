import{a2 as t,U as e,s as a,D as s,o as l,c as i,w as c,a as o,x as n,y as h,b as r,N as u,P as p,O as d,j as m,t as y,I as g,i as f,e as k,S as C,k as x,n as _,h as T,d as b}from"./index-CE7gXyKD.js";import{r as L,_ as S}from"./watermark.Dpp_Cumi.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";const v=N({props:{clearValuebtn:{type:Boolean,default:!0},isFocus:{type:Boolean,default:!1},Theme:{type:String,default:"good-search-circle"},maxLength:{type:[String,Number],default:"140"},inputHeight:{type:[String,Number],default:"35"},inputPlaceholder:{type:String,default:"请输入关键词搜索"},autoComplaylist:{type:Array,default:()=>[]},historyNum:{type:Number,default:6},hotList:{type:Array,default:()=>[]},speechEngine:{type:String,default:"iFly"},Punctuation:{type:Boolean,default:!1},callbackTime:{type:Number,default:500}},data(){return{speechengine:this.speechEngine,punctuation:this.Punctuation,historynum:this.historyNum,callbacktime:this.callbackTime,autocomplaylist:this.getcomplaylist(this.autoComplaylist),autocomplayarr:[],autocomplaystate:!1,searchText:"",hList:t("search_cache")}},watch:{historyNum:function(t){this.historynum=t},speechEngine:function(t){this.engine=t},hotList:function(t){this.hotList=t},autoComplaylist:function(t){this.autocomplaylist=this.getcomplaylist(t),this.searchText&&""!=this.searchText?(this.autocomplayarr=this.replacekeyword(this.autocomplaylist,this.searchText),this.autocomplaystate=this.autocomplayarr.length>0):this.autocomplaystate=!1},searchText:function(t){let e=this;var a=t.replace(/^ +| +$/g,"");a&&""!=a?(this.calbacktime&&clearTimeout(e.calbacktime),this.calbacktime=setTimeout((function(){e.inputChange(a)}),e.callbackTime),this.autocomplayarr=this.replacekeyword(this.autocomplaylist,a),this.autocomplaystate=this.autocomplayarr.length>0):this.autocomplaystate=!1}},methods:{goback(){e({delta:1})},clearvalue(){let t=this;setTimeout((function(){t.searchText=""}),20),this.searchText=""},getcomplaylist(t){for(var e=[],a=0;a<t.length;a++)e.push({richtxt:t[a],value:t[a]});return e},replacekeyword(t,e){for(var a=[],s=0;s<t.length;s++)-1!=t[s].richtxt.search(e)&&a.push({richtxt:t[s].richtxt.replace(e,"<span style='color: #333;font-weight:bold'>"+e+"</span>"),value:t[s].value});return a},tagsClick(t){let e=this;setTimeout((function(){e.searchText=t,e.searchStart()}),20),this.$emit("tagsClick",t)},inputChange(t){this.$emit("inputChange",t)},notSupport(){a({title:"该平台暂不支持",icon:"none",duration:1e3})},searchStart(){if(""==this.searchText)return a({title:"请输入关键字",icon:"none",duration:1e3}),!1;this.$emit("clickSearch",this.searchText)},delhistory(){this.hList=[],s({key:"search_cache",data:[]}),this.$emit("delhHistory")},startRecognize(){let t=this,e={};e.engine=t.speechengine,e.punctuation=t.punctuation,e.timeout=1e3,plus.speech.startRecognize(e,(function(e){t.searchText=t.searchText+e}))}}},[["render",function(t,e,a,s,_,T){const b=g,L=f,S=k,N=C,v=x;return l(),i(L,{class:n(["good-search-page",a.Theme])},{default:c((()=>[o(L,{class:"good-search-head"},{default:c((()=>[o(b,{class:n({clearvalue:a.clearValuebtn}),maxlength:a.maxLength,style:h({"line-height":a.inputHeight+"px",height:a.inputHeight+"px"}),focus:a.isFocus,type:"text","confirm-type":"search",onConfirm:e[0]||(e[0]=t=>T.searchStart()),placeholder:a.inputPlaceholder,"confirm-hold":!0,modelValue:_.searchText,"onUpdate:modelValue":e[1]||(e[1]=t=>_.searchText=t)},null,8,["class","maxlength","style","focus","placeholder","modelValue"]),o(L,{class:"good-search-icon search-icon2",onClick:e[2]||(e[2]=t=>T.goback())},{default:c((()=>[r("取消")])),_:1}),o(L,{class:"good-search-icon search-icon iconfont iconsousuo-copy",onClick:e[3]||(e[3]=t=>T.searchStart())}),_.autocomplaystate?(l(),i(N,{key:0,class:"autocomplay",style:h({top:a.inputHeight+5+"px"}),"scroll-y":""},{default:c((()=>[(l(!0),u(p,null,d(_.autocomplayarr,((t,e)=>(l(),i(L,{class:"autocomplay-item",key:e,onClick:e=>T.tagsClick(t.value)},{default:c((()=>[o(S,{nodes:t.richtxt},null,8,["nodes"])])),_:2},1032,["onClick"])))),128)),_.autocomplayarr.length<1?(l(),i(L,{key:0,style:{color:"#999","text-align":"center","justify-content":"center","line-height":"70rpx"}},{default:c((()=>[r("没有相关信息")])),_:1})):m("",!0)])),_:1},8,["style"])):m("",!0)])),_:1}),o(L,{class:"good-search-body"},{default:c((()=>[_.hList.length>0?(l(),i(L,{key:0,class:"search-history"},{default:c((()=>[o(L,{class:"header"},{default:c((()=>[o(v,null,{default:c((()=>[r("历史记录")])),_:1}),o(L,{class:"good-search-icon delete-icon iconfont iconshanchu",onClick:e[4]||(e[4]=t=>T.delhistory())})])),_:1}),o(L,{class:"list"},{default:c((()=>[(l(!0),u(p,null,d(_.hList,((t,e)=>(l(),i(L,{key:e,onClick:e=>T.tagsClick(t)},{default:c((()=>[r(y(t),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):m("",!0),a.hotList.length>0?(l(),i(L,{key:1,class:"search-showhot"},{default:c((()=>[o(L,{class:"header"},{default:c((()=>[o(v,null,{default:c((()=>[r("猜你想搜的")])),_:1})])),_:1}),o(L,{class:"list"},{default:c((()=>[(l(!0),u(p,null,d(a.hotList,((t,e)=>(l(),i(L,{key:e,onClick:e=>T.tagsClick(t)},{default:c((()=>[r(y(t),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1},8,["class"])}],["__scopeId","data-v-3183098e"]]);const P=N({data:()=>({list:[],autoComplaylist:[],hotList:[],historyNum:4,inputPlaceholder:"输入好友名称",inputHeight:40,theme:"good-search-circle",speechEngine:"iFly",Punctuation:!1,callbacktime:500,isFocus:!0,urlList:[],searchinput:""}),computed:{},onLoad(){},methods:{godetail(t){_({url:"../../wx/personInfo/detail?param="+t.userId})},clickearch(t){this.getflist(t.trim())},getflist(t){this.$http.request({url:"/friend/friendList",method:"POST",data:JSON.stringify({param:t}),success:t=>{if(200==t.data.code){for(var e=t.data.data,a=[],s=0;s<e.length;s++){var l=e[s];a.push(l)}this.list=a}}})},tagsclick(t){console.log(t)},delhistory(){},inputchange(t){}}},[["render",function(t,e,a,s,n,h){const m=L(T("watermark"),S),g=L(T("zy-search"),v),k=b,C=f;return l(),i(C,null,{default:c((()=>[o(m),o(g,{inputPlaceholder:n.inputPlaceholder,inputHeight:n.inputHeight,isFocus:n.isFocus,theme:n.theme,callbackTime:n.callbacktime,autoComplaylist:n.autoComplaylist,hotList:n.hotList,historyNum:n.historyNum,speechEngine:n.speechEngine,Punctuation:n.Punctuation,onClickSearch:h.clickearch,onTagsClick:h.tagsclick,onDelhHistory:h.delhistory,onInputChange:h.inputchange,modelValue:n.searchinput,"onUpdate:modelValue":e[0]||(e[0]=t=>n.searchinput=t)},null,8,["inputPlaceholder","inputHeight","isFocus","theme","callbackTime","autoComplaylist","hotList","historyNum","speechEngine","Punctuation","onClickSearch","onTagsClick","onDelhHistory","onInputChange","modelValue"]),o(C,{class:"search-friends-list"},{default:c((()=>[(l(!0),u(p,null,d(n.list,((t,e)=>(l(),i(C,{class:"search-friends-list-item",key:e},{default:c((()=>[o(k,{class:"search-friends-list-img",src:t.portrait,mode:"aspectFill",onClick:e=>h.godetail(t)},null,8,["src","onClick"]),o(C,{class:"search-friends-list-user",onClick:e=>h.godetail(t)},{default:c((()=>[o(C,{class:"search-friends-list-username"},{default:c((()=>[r(y(t.nickName),1)])),_:2},1024),o(C,{class:"search-friends-list-remark"},{default:c((()=>[r(y(t.chatNo),1)])),_:2},1024)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})}],["__scopeId","data-v-2a86381c"]]);export{P as default};
