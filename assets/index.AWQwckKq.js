import{o as t,c as e,w as s,a as o,v as n,N as i,P as a,O as l,y as r,C as c,b as u,t as h,k as d,i as f,Z as p,n as m,f as g,E as v,F as w,s as x,h as y,a3 as b,a4 as _,j as C,d as k}from"./index-CE7gXyKD.js";import{r as S,_ as T}from"./watermark.Dpp_Cumi.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as A}from"./uni-load-more.BYiGPlg5.js";let D={},X=null;X=function(){var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=!0;for(let o=0;o<e.length-1;o++)if(t.indexOf(e[o])>0){s=!1;break}return s}(),D={data:()=>({is_show:"none"}),watch:{show(t){this.is_show=this.show}},created(){this.swipeaction=this.getSwipeAction(),void 0!==this.swipeaction.children&&this.swipeaction.children.push(this)},mounted(){this.is_show=this.show},methods:{closeSwipe(t){this.autoClose&&this.swipeaction.closeOther(this)},change(t){this.$emit("change",t.open),this.is_show!==t.open&&(this.is_show=t.open)},appTouchStart(t){if(X)return;const{clientX:e}=t.changedTouches[0];this.clientX=e,this.timestamp=(new Date).getTime()},appTouchEnd(t,e,s,o){if(X)return;const{clientX:n}=t.changedTouches[0];let i=Math.abs(this.clientX-n),a=(new Date).getTime()-this.timestamp;i<40&&a<300&&this.$emit("click",{content:s,index:e,position:o})},onClickForPC(t,e,s){X&&this.$emit("click",{content:e,index:t,position:s})}}};var $=!1;function O(t,e){var s=t.instance,o=s.getDataset().disabled,n=s.getState();M(s,e),(o=("string"==typeof o?JSON.parse(o):o)||!1)||(s.requestAnimationFrame((function(){s.removeClass("ani"),e.callMethod("closeSwipe")})),n.x=n.left||0,function(t){var e=t.instance,s=e.getState();q(e);var o=t.touches[0];$&&E()&&(o=t);s.startX=o.clientX,s.startY=o.clientY}(t))}function F(t,e){var s=t.instance,o=s.getDataset().disabled,n=s.getState();(o=("string"==typeof o?JSON.parse(o):o)||!1)||(!function(t){var e=t.instance.getState(),s=t.touches[0];$&&E()&&(s=t);e.deltaX=s.clientX-e.startX,e.deltaY=s.clientY-e.startY,e.offsetY=Math.abs(e.deltaY),e.offsetX=Math.abs(e.deltaX),e.direction=e.direction||function(t,e){if(t>e&&t>10)return"horizontal";if(e>t&&e>10)return"vertical";return""}(e.offsetX,e.offsetY)}(t),"horizontal"===n.direction&&(t.preventDefault&&t.preventDefault(),I(n.x+n.deltaX,s)))}function W(t,e){var s=t.instance,o=s.getDataset().disabled,n=s.getState();(o=("string"==typeof o?JSON.parse(o):o)||!1)||function(t,e,s){var o=e.getState(),n=o.threshold;o.position;var i=o.isopen||"none",a=o.leftWidth,l=o.rightWidth;if(0===o.deltaX)return void Y("none",e,s);Y("none"===i&&l>0&&-t>n||"none"!==i&&l>0&&l+t<n?"right":"none"===i&&a>0&&t>n||"none"!==i&&a>0&&a-t<n?"left":"none",e,s)}(n.left,s,e)}function I(t,e,s){t=t||0;var o,n,i,a=e.getState(),l=a.leftWidth,r=a.rightWidth;a.left=(o=t,n=-r,i=l,Math.min(Math.max(o,n),i)),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+a.left+"px)","-webkit-transform":"translateX("+a.left+"px)"})}))}function M(t,e){var s,o,n=t.getState(),i=e.selectComponent(".button-group--left"),a=e.selectComponent(".button-group--right");s=i.getBoundingClientRect(),o=a.getBoundingClientRect(),n.leftWidth=s.width||0,n.rightWidth=o.width||0,n.threshold=t.getDataset().threshold}function Y(t,e,s){var o=e.getState(),n=o.leftWidth,i=o.rightWidth,a="";switch(o.isopen=o.isopen?o.isopen:"none",t){case"left":a=n;break;case"right":a=-i;break;default:a=0}o.isopen!==t&&(o.throttle=!0,s.callMethod("change",{open:t})),o.isopen=t,e.requestAnimationFrame((function(){e.addClass("ani"),I(a,e)}))}function q(t){var e=t.getState();e.direction="",e.deltaX=0,e.deltaY=0,e.offsetX=0,e.offsetY=0}function E(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],s=!0,o=0;o<e.length-1;o++)if(t.indexOf(e[o])>0){s=!1;break}return s}"object"==typeof window&&($=!0);var z=!1;const N={showWatch:function(t,e,s,o){var n=o.getState();M(o,s),t&&"none"!==t?Y(t,o,s):(n.left&&Y("none",o,s),q(o))},touchstart:O,touchmove:F,touchend:W,mousedown:function(t,e){$&&E()&&(O(t,e),z=!0)},mousemove:function(t,e){$&&E()&&z&&F(t)},mouseup:function(t,e){$&&E()&&(W(t,e),z=!1)},mouseleave:function(t,e){$&&E()&&(z=!1)}},j=t=>{t.$wxs||(t.$wxs=[]),t.$wxs.push("wxsswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.wxsswipe=N}})},L={showWatch(t,e,s,o,n){var i=n.state;(s.$el||s.$vm&&s.$vm.$el)&&(this.getDom(o,s,n),t&&"none"!==t?this.openState(t,o,s,n):(i.left&&this.openState("none",o,s,n),this.resetTouchStatus(o,n)))},touchstart(t,e,s){let o=t.instance,n=o.getDataset().disabled,i=s.state;this.getDom(o,e,s),n=this.getDisabledType(n),n||(o.requestAnimationFrame((function(){o.removeClass("ani"),e.callMethod("closeSwipe")})),i.x=i.left||0,this.stopTouchStart(t,e,s))},touchmove(t,e,s){let o=t.instance;if(!o)return;let n=o.getDataset().disabled,i=s.state;if(n=this.getDisabledType(n),n)return;if(this.stopTouchMove(t,s),"horizontal"!==i.direction)return;t.preventDefault&&t.preventDefault();let a=i.x+i.deltaX;this.move(a,o,e,s)},touchend(t,e,s){let o=t.instance,n=o.getDataset().disabled,i=s.state;n=this.getDisabledType(n),n||this.moveDirection(i.left,o,e,s)},move(t,e,s,o){t=t||0;let n=o.state,i=n.leftWidth,a=n.rightWidth;n.left=this.range(t,-a,i),e.requestAnimationFrame((function(){e.setStyle({transform:"translateX("+n.left+"px)","-webkit-transform":"translateX("+n.left+"px)"})}))},getDom(t,e,s){var o=s.state,n=e.$el||e.$vm&&e.$vm.$el,i=n.querySelector(".button-group--left"),a=n.querySelector(".button-group--right");o.leftWidth=i.offsetWidth||0,o.rightWidth=a.offsetWidth||0,o.threshold=t.getDataset().threshold},getDisabledType:t=>("string"==typeof t?JSON.parse(t):t)||!1,range:(t,e,s)=>Math.min(Math.max(t,e),s),moveDirection(t,e,s,o){var n=o.state,i=n.threshold;n.position;var a=n.isopen||"none",l=n.leftWidth,r=n.rightWidth;0!==n.deltaX?"none"===a&&r>0&&-t>i||"none"!==a&&r>0&&r+t<i?this.openState("right",e,s,o):"none"===a&&l>0&&t>i||"none"!==a&&l>0&&l-t<i?this.openState("left",e,s,o):this.openState("none",e,s,o):this.openState("none",e,s,o)},openState(t,e,s,o){let n=o.state,i=n.leftWidth,a=n.rightWidth,l="";switch(n.isopen=n.isopen?n.isopen:"none",t){case"left":l=i;break;case"right":l=-a;break;default:l=0}n.isopen!==t&&(n.throttle=!0,s.callMethod("change",{open:t})),n.isopen=t,e.requestAnimationFrame((()=>{e.addClass("ani"),this.move(l,e,s,o)}))},getDirection:(t,e)=>t>e&&t>10?"horizontal":e>t&&e>10?"vertical":"",resetTouchStatus(t,e){let s=e.state;s.direction="",s.deltaX=0,s.deltaY=0,s.offsetX=0,s.offsetY=0},stopTouchStart(t,e,s){let o=t.instance,n=s.state;this.resetTouchStatus(o,s);var i=t.touches[0];n.startX=i.clientX,n.startY=i.clientY},stopTouchMove(t,e){t.instance;let s=e.state,o=t.touches[0];s.deltaX=o.clientX-s.startX,s.deltaY=o.clientY-s.startY,s.offsetY=Math.abs(s.deltaY),s.offsetX=Math.abs(s.deltaX),s.direction=s.direction||this.getDirection(s.offsetX,s.offsetY)}},V={mounted(t,e,s){this.state={}},methods:{showWatch(t,e,s,o){L.showWatch(t,e,s,o,this)},touchstart(t,e){L.touchstart(t,e,this)},touchmove(t,e){L.touchmove(t,e,this)},touchend(t,e){L.touchend(t,e,this)}}},B=t=>{t.$renderjs||(t.$renderjs=[]),t.$renderjs.push("renderswipe"),t.mixins||(t.mixins=[]),t.mixins.push({beforeCreate(){this.renderswipe=this},mounted(){this.$ownerInstance=this.$gcd(this,!0)}}),t.mixins.push(V)},R={mixins:[D,{},{}],emits:["click","change"],props:{show:{type:String,default:"none"},disabled:{type:Boolean,default:!1},autoClose:{type:Boolean,default:!0},threshold:{type:Number,default:20},leftOptions:{type:Array,default:()=>[]},rightOptions:{type:Array,default:()=>[]}},unmounted(){this.__isUnmounted=!0,this.uninstall()},methods:{uninstall(){this.swipeaction&&this.swipeaction.children.forEach(((t,e)=>{t===this&&this.swipeaction.children.splice(e,1)}))},getSwipeAction(t="uniSwipeAction"){let e=this.$parent,s=e.$options.name;for(;s!==t;){if(e=e.$parent,!e)return!1;s=e.$options.name}return e}}};j(R),B(R);const J=P(R,[["render",function(p,m,g,v,w,x){const y=d,b=f;return t(),e(b,{class:"uni-swipe"},{default:s((()=>[o(b,{class:"uni-swipe_box","change:prop":p.wxsswipe.showWatch,prop:p.is_show,"data-threshold":g.threshold,"data-disabled":g.disabled,onTouchstart:p.wxsswipe.touchstart,onTouchmove:p.wxsswipe.touchmove,onTouchend:p.wxsswipe.touchend},{default:s((()=>[o(b,{class:"uni-swipe_button-group button-group--left"},{default:s((()=>[n(p.$slots,"left",{},(()=>[(t(!0),i(a,null,l(g.leftOptions,((n,i)=>(t(),e(b,{key:i,style:r({backgroundColor:n.style&&n.style.backgroundColor?n.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:p.appTouchStart,onTouchend:t=>p.appTouchEnd(t,i,n,"left"),onClick:c((t=>p.onClickForPC(i,n,"left")),["stop"])},{default:s((()=>[o(y,{class:"uni-swipe_button-text",style:r({color:n.style&&n.style.color?n.style.color:"#FFFFFF",fontSize:n.style&&n.style.fontSize?n.style.fontSize:"16px"})},{default:s((()=>[u(h(n.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3}),o(b,{class:"uni-swipe_text--center"},{default:s((()=>[n(p.$slots,"default",{},void 0,!0)])),_:3}),o(b,{class:"uni-swipe_button-group button-group--right"},{default:s((()=>[n(p.$slots,"right",{},(()=>[(t(!0),i(a,null,l(g.rightOptions,((n,i)=>(t(),e(b,{key:i,style:r({backgroundColor:n.style&&n.style.backgroundColor?n.style.backgroundColor:"#C7C6CD"}),class:"uni-swipe_button button-hock",onTouchstart:p.appTouchStart,onTouchend:t=>p.appTouchEnd(t,i,n,"right"),onClick:c((t=>p.onClickForPC(i,n,"right")),["stop"])},{default:s((()=>[o(y,{class:"uni-swipe_button-text",style:r({color:n.style&&n.style.color?n.style.color:"#FFFFFF",fontSize:n.style&&n.style.fontSize?n.style.fontSize:"16px"})},{default:s((()=>[u(h(n.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onTouchstart","onTouchend","onClick"])))),128))]),!0)])),_:3})])),_:3},8,["change:prop","prop","data-threshold","data-disabled","onTouchstart","onTouchmove","onTouchend"])])),_:3})}],["__scopeId","data-v-ae2d0852"]]);const G=P({name:"uniSwipeAction",data:()=>({}),created(){this.children=[]},methods:{resize(){},closeAll(){this.children.forEach((t=>{t.is_show="none"}))},closeOther(t){this.openItem&&this.openItem!==t&&(this.openItem.is_show="none"),this.openItem=t}}},[["render",function(o,i,a,l,r,c){const u=f;return t(),e(u,null,{default:s((()=>[n(o.$slots,"default")])),_:3})}]]),U="/assets/map-r1-ve6s3.png";const Z=P({emits:["clickitem"],data:()=>({queryParams:{refreshing:!1,status:"more",pageNum:1,pageSize:10},list:[],innerAudioContext:"",paused:!1,types:[{label:"全部",value:""},{label:"文字",value:"TEXT"},{label:"图片",value:"IMAGE"},{label:"视频",value:"VIDEO"},{label:"位置",value:"LOCATION"},{label:"语音",value:"VOICE"},{label:"名片",value:"CARD"}]}),props:{type:{type:String,default:"1"}},mounted(){this.queryParams.refreshing=!0,this.getList("")},computed:{userinfo(){return this.$store.state.userInfo}},methods:{clickitem(t,e){this.$emit("clickitem",t,e)},favoritesDeleta(t,e){p({title:"警告",content:"是否确认删除收藏",success:s=>{s.confirm?this.$http.request({url:"/collect/remove/"+t.collectId,success:t=>{200==t.data.code&&this.list.splice(e,1)}}):s.cancel}})},goAddfriend(t){m({url:"../personInfo/detail?param="+t.userId+"&source=2"})},returnParse:t=>JSON.parse(t),getList(t){g(),this.queryParams.status="loading",this.$fc.loadMore({url:"/collect/list?collectType="+t,queryParams:this.queryParams}).then((t=>{if(this.queryParams=t.queryParams,"3"!=t.status){if("0"!=t.status){for(var e=t.list,s=[],o=0;o<e.length;o++){var n=e[o];s.push(n)}"2"==t.status&&(this.list=s),"1"==t.status&&(this.list=this.list.concat(s))}}else this.list=[]}))},playVOICE(t){if(this.paused)return this.innerAudioContext.destroy(),void(this.paused=!this.paused);this.innerAudioContext=v(),this.innerAudioContext.sessionCategory="soloAmbient",this.innerAudioContext.src=t,this.innerAudioContext.play(),this.innerAudioContext.onPlay((()=>{this.paused=!0})),this.innerAudioContext.onPause((()=>{this.paused=!1,this.innerAudioContext.destroy()}))},goMap(t){w({latitude:t.latitude,longitude:t.longitude,success:function(){}})},openVideo(t){this.$fc.plusDownload({onlinePath:t}).then((t=>{this.$fc.plusOpenFile({filePath:t})}))},clickType(t){this.queryParams.refreshing=!0,this.getList(t.value)}},onPullDownRefresh(){this.queryParams.refreshing=!0,this.getList("")},onReachBottom(){this.getList("")},onNavigationBarButtonTap(t){if(0===t.index)x({title:"添加",icon:"none"})}},[["render",function(n,r,c,p,m,g){const v=S(y("watermark"),T),w=f,x=k,P=d,D=S(y("uni-swipe-action-item"),J),X=S(y("uni-swipe-action"),G),$=S(y("uni-load-more"),A);return t(),e(w,{class:"bgColor"},{default:s((()=>[o(v),o(w,{class:"favorites-wx"},{default:s((()=>[o(w,{class:"favorites-wx-top"},{default:s((()=>[(t(!0),i(a,null,l(m.types,((o,n)=>(t(),e(w,{class:"favorites-wx-top-item",key:n,onClick:t=>g.clickType(o)},{default:s((()=>[u(h(o.label),1)])),_:2},1032,["onClick"])))),128)),o(w,{class:"favorites-wx-tips"},{default:s((()=>[u("点击预览，按住卡片向左滑动操作")])),_:1})])),_:1}),o(X,null,{default:s((()=>[(t(!0),i(a,null,l(m.list,((i,a)=>(t(),e(D,{class:"favorites-uni-swipe-action-item",key:a},{right:s((()=>[o(w,{class:"favorites-wx-action-item"},{default:s((()=>[o(w,{class:"favorites-wx-action-item-btn favorites-wx-delete",onClick:t=>g.favoritesDeleta(i,a)},{default:s((()=>[u("删除")])),_:2},1032,["onClick"]),"2"==c.type?(t(),e(w,{key:0,class:"favorites-wx-action-item-btn favorites-wx-view",onClick:t=>g.clickitem(i,a)},{default:s((()=>[u("发送")])),_:2},1032,["onClick"])):C("",!0)])),_:2},1024)])),default:s((()=>[o(w,{class:"favorites-wx-item"},{default:s((()=>["TEXT"==i.collectType?(t(),e(w,{key:0,class:"favorites-wx-content favorites-wx-content-text"},{default:s((()=>[o(w,{class:"favorites-wx-text"},{default:s((()=>[u(h(i.content),1)])),_:2},1024)])),_:2},1024)):C("",!0),"IMAGE"==i.collectType?(t(),e(w,{key:1,class:"favorites-wx-content favorites-wx-content-img"},{default:s((()=>[o(x,{src:g.returnParse(i.content).url,onClick:t=>n.$fc.previewImagesolo(g.returnParse(i.content).url),mode:"aspectFill"},null,8,["src","onClick"])])),_:2},1024)):C("",!0),"VIDEO"==i.collectType?(t(),e(w,{key:2,class:"favorites-wx-content favorites-wx-content-video"},{default:s((()=>[o(w,{class:"favorites-wx-content-video-img",onClick:t=>g.openVideo(g.returnParse(i.content).url)},{default:s((()=>[o(x,{src:g.returnParse(i.content).img,mode:"aspectFill"},null,8,["src"]),o(w,{class:"favorites-wx-content-video-icon"},{default:s((()=>[o(P,{class:"wxfont bofang"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):C("",!0),"LOCATION"==i.collectType?(t(),e(w,{key:3,class:"favorites-wx-content favorites-wx-content-location"},{default:s((()=>[o(w,{class:"favorites-wx-content-location-box",onClick:t=>g.goMap({latitude:g.returnParse(i.content).latitude,longitude:g.returnParse(i.content).longitude})},{default:s((()=>[o(w,{class:"favorites-wx-content-location-box-name"},{default:s((()=>[u(h(g.returnParse(i.content).name),1)])),_:2},1024),o(w,{class:"favorites-wx-content-location-box-address"},{default:s((()=>[u(h(g.returnParse(i.content).address),1)])),_:2},1024),o(x,{class:"favorites-wx-content-location-box-map",src:"/assets/map-r1-ve6s3.png",mode:"aspectFit"})])),_:2},1032,["onClick"])])),_:2},1024)):C("",!0),"VOICE"==i.collectType?(t(),e(w,{key:4,class:"favorites-wx-content favorites-wx-content-voice"},{default:s((()=>[o(w,{class:"favorites-wx-content-voice-box"},{default:s((()=>[o(w,{class:"favorites-wx-content-voice-content",onClick:t=>g.playVOICE(g.returnParse(i.content).url)},{default:s((()=>[o(P,null,{default:s((()=>[u(h(g.returnParse(i.content).time),1)])),_:2},1024),o(P,{class:"wxfont yuyin"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):C("",!0),"CARD"==i.collectType?(t(),e(w,{key:5,class:"favorites-wx-content"},{default:s((()=>[o(w,{class:"favorites-wx-content-card",onClick:t=>g.goAddfriend(g.returnParse(i.content))},{default:s((()=>[o(w,{class:"favorites-wx-content-card-top"},{default:s((()=>[o(x,{class:"favorites-wx-content-card-top-img",src:g.returnParse(i.content).avatar},null,8,["src"]),o(w,{class:"favorites-wx-content-card-top-content"},{default:s((()=>[o(w,{class:"favorites-wx-content-card-title"},{default:s((()=>[u(h(g.returnParse(i.content).name),1)])),_:2},1024),o(w,{class:"favorites-wx-content-card-no"},{default:s((()=>[u(h(g.returnParse(i.content).chatNo),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(w,{class:"favorites-wx-content-card-card"},{default:s((()=>[u("名片")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):C("",!0),o(w,{class:"favorites-wx-bottom"},{default:s((()=>[o(P,null,{default:s((()=>[u(h(g.userinfo.nickName),1)])),_:1}),o(P,null,{default:s((()=>[u(h(g.userinfo.createTime),1)])),_:1})])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1}),b(o($,{status:m.queryParams.status},null,8,["status"]),[[_,m.list.length>0]])])),_:1})])),_:1})}],["__scopeId","data-v-c6a0bc81"]]),H=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{U as _,Z as f,H as i};
