import{n as e,s as a,f as s,q as o,h as t,c as l,w as n,i,o as r,a as d,b as c,j as m,t as g,I as u,d as f,k as h,l as p,m as w,p as x}from"./index-CE7gXyKD.js";import{r as _,_ as k}from"./watermark.Dpp_Cumi.js";import{_ as b}from"./uni-icons.tBNBx2EM.js";import{_ as y,a as C}from"./l04.BGrzyG5b.js";import{_ as v}from"./_plugin-vue_export-helper.BCo6x5W8.js";const P=v({data:()=>({code:"",loading:!1,timer:null,time:60,logintype:0,phone:"",cid:"",showPassword:!0,agree:!1}),onLoad(){},methods:{changePassword(){this.showPassword=!this.showPassword},goLogin(){e({url:"../login/index"})},goagreement(){this.$http.request({url:"/common/getAgreement",success:e=>{200==e.data.code&&window.open(e.data.data)}})},getMsgCode(){if(this.phone&&/^1[0-9]{10,10}$/.test(this.phone)){this.loading=!0,this.timer=setInterval((()=>{this.time--,this.time<=0&&(clearInterval(this.timer),this.loading=!1,this.time=60)}),1e3);var e={phone:this.phone,type:"1"};this.$http.request({url:"/auth/sendCode",method:"POST",data:JSON.stringify(e),success:e=>{200==e.data.code&&(this.code=e.data.data.code,a({title:"验证码已发送至你的手机",icon:"none"}))}})}else a({title:"请输入正确的手机号",icon:"none"})},rMathfloor:(e,a)=>Math.floor(Math.random()*(a-e+1))+e,sublogin(e){var t=e.detail.value;t.password=this.$md5.hex_md5(t.password),this.agree?(s({title:"注册中..",mask:!0}),this.$http.request({url:"/auth/register",method:"POST",data:JSON.stringify(t),success:e=>{200==e.data.code&&a({title:"注册成功",complete(){setTimeout((()=>{o({url:"/wx/login/index"})}),1500)}})}})):a({title:"请先同意《隐私及服务协议》",icon:"none"})}}},[["render",function(e,a,s,o,v,P){const j=_(t("watermark"),k),M=i,S=u,V=_(t("uni-icons"),b),O=f,$=h,q=p,I=w,L=x;return r(),l(M,{class:"wx-login"},{default:n((()=>[d(j),d(M,{class:"wx-login-title"},{default:n((()=>[c("手机号注册")])),_:1}),d(M,{class:"xw-login-form"},{default:n((()=>[d(L,{onSubmit:P.sublogin},{default:n((()=>[d(M,{class:"xw-login-form-item"},{default:n((()=>[d(M,{class:"xw-login-form-label"},{default:n((()=>[c("手机号")])),_:1}),d(S,{class:"xw-login-form-input",maxlength:"11",placeholder:"请填写手机号",type:"text",name:"phone",modelValue:v.phone,"onUpdate:modelValue":a[0]||(a[0]=e=>v.phone=e)},null,8,["modelValue"]),v.phone.length>0?(r(),l(M,{key:0,class:"login-form-icon login-form-seepass",onClick:a[1]||(a[1]=e=>v.phone="")},{default:n((()=>[d(V,{type:"clear",size:"26",color:"#B9CCE0"})])),_:1})):m("",!0)])),_:1}),d(M,{class:"xw-login-form-item"},{default:n((()=>[d(M,{class:"xw-login-form-label"},{default:n((()=>[c("验证码")])),_:1}),d(S,{class:"xw-login-form-input",placeholder:"请填写验证码",modelValue:v.code,"onUpdate:modelValue":a[2]||(a[2]=e=>v.code=e),name:"code",type:"text"},null,8,["modelValue"]),v.loading?(r(),l(M,{key:1,class:"wx-btn wx-btn-info"},{default:n((()=>[c(g(v.time)+"秒后重试",1)])),_:1})):(r(),l(M,{key:0,class:"wx-btn wx-btn-info",onClick:a[3]||(a[3]=e=>P.getMsgCode())},{default:n((()=>[c("获取验证码")])),_:1}))])),_:1}),d(M,{class:"xw-login-form-item"},{default:n((()=>[d(M,{class:"xw-login-form-label"},{default:n((()=>[c("密码")])),_:1}),d(S,{class:"xw-login-form-input",placeholder:"请输入密码",name:"password",password:v.showPassword,type:"text",value:""},null,8,["password"]),d(M,{class:"login-form-icon login-form-seepass",onClick:P.changePassword},{default:n((()=>[v.showPassword?(r(),l(O,{key:0,src:y,mode:"aspectFill"})):(r(),l(O,{key:1,src:C,mode:"aspectFill"}))])),_:1},8,["onClick"])])),_:1}),d(M,{class:"xw-login-form-item"},{default:n((()=>[d(M,{class:"xw-login-form-label"},{default:n((()=>[c("昵称")])),_:1}),d(S,{class:"xw-login-form-input",placeholder:"请输入你的昵称",type:"text",name:"nickName",value:""})])),_:1}),d($,{class:"xw-login-form-code",onClick:P.goLogin},{default:n((()=>[c("已注册，去登录")])),_:1},8,["onClick"]),d(q,{class:"wx-btn wx-btn-info xw-login-form-btn","form-type":"submit"},{default:n((()=>[c("注册")])),_:1}),d(M,{class:"login-agree"},{default:n((()=>[d(M,{class:"login-agree-checkd"},{default:n((()=>[d(I,{onClick:a[4]||(a[4]=e=>v.agree=!v.agree),style:{transform:"scale(0.7)"},checked:v.agree},null,8,["checked"]),d($,{class:"login-agree-btn",onClick:a[5]||(a[5]=e=>v.agree=!v.agree)},{default:n((()=>[c("已阅读并同意")])),_:1})])),_:1}),d(M,{class:"login-agree-text",onClick:a[6]||(a[6]=e=>P.goagreement())},{default:n((()=>[c("《隐私及服务协议》")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})}],["__scopeId","data-v-04667579"]]);export{P as default};
