import{n as t,s as e,Z as a,U as s,h as i,c as l,w as d,i as o,o as n,a as r,b as c,k as u,ac as h}from"./index-CE7gXyKD.js";import{r as f,_ as m}from"./watermark.Dpp_Cumi.js";import{_ as p}from"./tool-list-wx.DlOztQ6t.js";import{_ as I}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-badge.BSmtmuwp.js";import"./uni-icons.tBNBx2EM.js";const k=I({data:()=>({detail:"",list1:[{title:"把他推荐给朋友",path:"#"}],list2:[{title:"设置备注和标签",path:"#"}]}),onLoad(t){var e=decodeURIComponent(t.data);t.data=t.data.replace(/%/g,"%25");var a=JSON.parse(e);this.detail=a},computed:{Baned(){return"Y"==this.detail.black},chatList(){return this.$store.state.chatlist}},onShow(){},methods:{itemClick2(e,a){if(0===a)t({url:"beizhu?userId="+this.detail.userId+"&remark="+this.detail.nickName})},heifangfangChange(t){var a=t.detail.value?"Y":"N",s=t.detail.value?"已加入黑名单":"已移除黑名单";this.$http.request({url:"/friend/black",method:"POST",data:JSON.stringify({userId:this.detail.userId,black:a}),success:t=>{200==t.data.code&&e({title:s,icon:"none"})}})},deleteFriend(){a({title:"提醒",content:"是否确认删除好友",success:t=>{t.confirm?this.$http.request({url:"/friend/delFriend",method:"POST",data:JSON.stringify({userId:this.detail.userId}),success:t=>{200==t.data.code&&(delete this.chatList[this.detail.userId],this.$store.dispatch("updateChatListInfoById",{userId:this.detail.userId,data:{}}),this.$store.dispatch("updateChatById",{userId:this.detail.userId,data:[]}),e({title:"删除成功",icon:"none"}).then((()=>{s({delta:3})})))}}):t.cancel}})},itemClick1(t,a){if(0===a)e({title:"把他推荐给朋友",icon:"none"})}}},[["render",function(t,e,a,s,I,k){const C=f(i("watermark"),m),_=f(i("tool-list-wx"),p),x=u,g=h,w=o;return n(),l(w,{class:"bgColor"},{default:d((()=>[r(C),r(_,{list:I.list2,onItemClick:k.itemClick2},null,8,["list","onItemClick"]),r(w,{class:"xw-tool-list"},{default:d((()=>[r(w,{class:"xw-tool-list-content"},{default:d((()=>[r(w,{class:"xw-tool-item"},{default:d((()=>[r(x,{class:"xw-tool-text"},{default:d((()=>[c("加入黑名单")])),_:1}),r(g,{color:"#05C160",checked:k.Baned,onChange:k.heifangfangChange,style:{transform:"scale(0.75)"}},null,8,["checked","onChange"])])),_:1})])),_:1})])),_:1}),r(w,{class:"xw-tool-list"},{default:d((()=>[r(w,{class:"xw-tool-list-content"},{default:d((()=>[r(w,{class:"xw-tool-btn-item",onClick:k.deleteFriend},{default:d((()=>[r(w,{class:"xw-tool-btn-text",style:{color:"#FF5A5F"}},{default:d((()=>[c("删除")])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-403471ad"]]);export{k as default};
