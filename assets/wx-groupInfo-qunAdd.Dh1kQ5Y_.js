import{J as t,s as e,U as s,h as a,c as r,w as i,y as o,i as d,o as n,a as l,b as c,t as u,j as h,k as p}from"./index-CE7gXyKD.js";import{r as f,_ as g}from"./watermark.Dpp_Cumi.js";import{_ as m}from"./uni-indexed-list-wx.Y7FQckb4.js";import{_ as w}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-badge.BSmtmuwp.js";import"./uni-icons.tBNBx2EM.js";const v=w({data:()=>({detail:{user:[]},list:[],select:[],windowTop:0,groupId:""}),onLoad(t){this.groupId=t.groupId},mounted(){this.getflist(),t({success:t=>{this.windowTop=t.windowTop}})},methods:{createGroup(){if(this.select.length<=0)e({title:"未选择",icon:"none"});else{for(var t=[],a=0;a<this.select.length;a++)"N"==this.select[a].data.addtype&&t.push(this.select[a].data.userId);var r={groupId:this.groupId,list:t};this.$http.request({url:"/group/invitationGroup",method:"POST",data:JSON.stringify(r),success:t=>{200==t.data.code&&s({delta:1}).then((t=>{e({title:"已邀请",icon:"none"})}))}})}},bindClick(t){this.select=t.select},getflist(){this.$http.request({url:"/group/getInfo/"+this.groupId,success:t=>{200==t.data.code&&(this.detail=t.data.data,this.$http.request({url:"/friend/friendList",method:"POST",data:JSON.stringify({}),success:t=>{if(200==t.data.code){let n=function(t,e,s){for(var a=[],r=0;r<e.length;r++){for(var i=e[r],o=i[s],d=!1,n=0;n<t.length;n++){if(t[n][s]==o){d=!0;break}}d||a.push(i)}return a},l=function(t,e,s){for(var a=[],r=0;r<e.length;r++){for(var i=e[r],o=i[s],d=!1,n=0;n<t.length;n++){if(t[n][s]==o){d=!0;break}}d&&a.push(i)}return a};for(var e=t.data.data,s=[],a=0;a<e.length;a++){"normal"==(d=e[a]).userType&&s.push({name:d.nickName,avatar:d.portrait,userId:d.userId,chatNo:d.chatNo})}var r=[],i=n(this.detail.user,s,"userId"),o=l(this.detail.user,s,"userId");for(a=0;a<i.length;a++){var d=i[a];r.push({name:d.name,avatar:d.avatar,userId:d.userId,chatNo:d.chatNo,addtype:"N",checked:!1})}for(a=0;a<o.length;a++){d=o[a];r.push({name:d.name,avatar:d.avatar,userId:d.userId,chatNo:d.chatNo,addtype:"Y",checked:!0})}this.list=this.$fc.sortList({list:r,key:"name"})}}}))}})}}},[["render",function(t,e,s,w,v,k){const I=f(a("watermark"),g),x=f(a("uni-indexed-list-wx"),m),N=d,_=p;return n(),r(N,{class:"wx-createGroup",style:o("height: calc(100vh - "+v.windowTop+"px)")},{default:i((()=>[l(I),l(N,{class:"wx-createGroup-check"},{default:i((()=>[l(x,{showSelect:"",showAdd:!1,options:v.list,onClick:k.bindClick},null,8,["options","onClick"])])),_:1}),l(N,{class:"wx-createGroup-foot"},{default:i((()=>[l(N,{class:"wx-btn wx-btn-info",onClick:k.createGroup},{default:i((()=>[c(" 完成 "),v.select.length>0?(n(),r(_,{key:0},{default:i((()=>[c("("+u(v.select.length)+")",1)])),_:1})):h("",!0)])),_:1},8,["onClick"])])),_:1})])),_:1},8,["style"])}],["__scopeId","data-v-5622cf58"]]);export{v as default};
