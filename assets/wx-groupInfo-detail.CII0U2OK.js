import{n as t,Z as e,U as s,s as a,G as o,h as i,c as l,w as d,j as r,i as u,o as c,a as n,N as p,O as h,P as g,b as f,k as I,ac as x,t as m,d as w}from"./index-CE7gXyKD.js";import{r as k,_ as C}from"./watermark.Dpp_Cumi.js";import{_}from"./tool-list-wx.DlOztQ6t.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./uni-badge.BSmtmuwp.js";import"./uni-icons.tBNBx2EM.js";const y=b({data:()=>({detail:{set:{top:"N",keepGroup:"N",disturb:"N"},group:{notice:""},user:[]}}),computed:{list3(){return[{title:"群聊名称",path:"#"},{title:"群二维码",path:"#",else:[{type:"img",content:"../../static/wx/t05.png"}]},{title:"群公告",path:"#",else:[{type:"text",content:this.detail.group.notice?this.detail.group.notice:""}]}]},Banedtop(){return"Y"==this.detail.set.top},BanedkeepGroup(){return"Y"==this.detail.set.keepGroup},Baneddisturb(){return"Y"==this.detail.set.disturb}},onLoad(t){this.param=t.param},onShow(){this.getInfo(this.param)},methods:{qunAdd(){t({url:"../../wx/groupInfo/qunAdd?groupId="+this.detail.group.groupId})},qunless(){t({url:"../../wx/groupInfo/qunless?groupId="+this.detail.group.groupId})},jiesan(){e({title:"提示",content:"确认解散群聊吗？",success:t=>{t.confirm&&this.$http.request({url:"/group/removeGroup/"+this.detail.group.groupId,success:t=>{200==t.data.code&&(delete this.$store.state.chatlist[this.detail.group.groupId],this.$store.dispatch("updateChatListInfoById",{userId:this.detail.group.groupId,data:{}}),this.$store.dispatch("updateChatById",{userId:this.detail.group.groupId,data:[]}),s({delta:2}).then((()=>{a({title:"解散成功",icon:"none"})})))}})}})},quitqun(){e({title:"提示",content:"确认退出群聊吗？",success:t=>{t.confirm&&this.$http.request({url:"/group/logoutGroup/"+this.detail.group.groupId,success:t=>{200==t.data.code&&(delete this.$store.state.chatlist[this.detail.group.groupId],this.$store.dispatch("updateChatListInfoById",{userId:this.detail.group.groupId,data:{}}),this.$store.dispatch("updateChatById",{userId:this.detail.group.groupId,data:[]}),s({delta:2}).then((()=>{a({title:"退出成功",icon:"none"})})))}})}})},qingchu(){e({title:"提示",content:"确认清除群聊消息吗？",success:t=>{t.confirm&&(delete this.$store.state.chatlist[this.detail.group.groupId],this.$store.dispatch("updateChatListInfoById",{userId:this.detail.group.groupId,data:{}}),this.$store.dispatch("updateChatById",{userId:this.detail.group.groupId,data:[]}),s({delta:2}).then((()=>{a({title:"清除成功",icon:"none"})})))}})},gofriend(e){t({url:"../../wx/personInfo/detail?param="+e.userId+"&source=7"})},switchChange(t,e){var s,o,i,l=t.detail.value?"Y":"N";switch(e){case"xxmdr":s="/group/editDisturb",o={groupId:this.param,disturb:l},i=t.detail.value?"已静默消息":"已取消静默消息";var d="N"==(r=JSON.parse(JSON.stringify(this.$store.state.chatlist[this.detail.group.groupId]))).disturb?"Y":"N";r.disturb=d,this.$store.dispatch("updateChatListInfoById",{userId:this.detail.group.groupId,data:r}),this.$store.dispatch("getChatList");break;case"zdlt":s="/group/editTop",o={groupId:this.param,top:l},i=t.detail.value?"已置顶":"已取消置顶";var r;d="N"==(r=JSON.parse(JSON.stringify(this.$store.state.chatlist[this.detail.group.groupId]))).top?"Y":"N";r.top=d,this.$store.dispatch("updateChatListInfoById",{userId:this.detail.group.groupId,data:r}),this.$store.dispatch("getChatList");break;case"bcdtxl":s="/group/editKeepGroup",o={groupId:this.param,keepGroup:l},i=t.detail.value?"已保存":"已移除"}this.$http.request({url:s,method:"POST",data:JSON.stringify(o),success:t=>{200==t.data.code&&a({title:i,icon:"none"})}})},itemClick3(e,s){switch(s){case 0:t({url:"editGroupName?groupId="+this.detail.group.groupId+"&name="+this.detail.group.name});break;case 1:t({url:"QRcode?groupId="+this.detail.group.groupId});break;case 2:t({url:"editGroupNotice?groupId="+this.detail.group.groupId+"&notice="+this.detail.group.notice})}},getInfo(t){this.$http.request({url:"/group/getInfo/"+t,success:t=>{200==t.data.code&&(this.detail=t.data.data,o({title:"聊天信息("+this.detail.user.length+")"}))}})}}},[["render",function(t,e,s,a,o,b){const y=k(i("watermark"),C),$=w,N=I,q=u,B=k(i("tool-list-wx"),_),j=x;return o.detail?(c(),l(q,{key:0,class:"bgColor"},{default:d((()=>[n(y),n(q,{class:"wxgroup-list"},{default:d((()=>[(c(!0),p(g,null,h(o.detail.user,((t,e)=>(c(),l(q,{class:"wxgroup-list-item",onClick:e=>b.gofriend(t),key:e},{default:d((()=>[n($,{class:"wxgroup-list-img",src:t.portrait,mode:"aspectFill"},null,8,["src"]),n(N,{class:"wxgroup-list-text"},{default:d((()=>[f(m(t.nickName),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),n(q,{class:"wxgroup-list-item",onClick:b.qunAdd},{default:d((()=>[n(q,{class:"wxgroup-list-icon"},{default:d((()=>[n(q,{class:"wxfont jia"})])),_:1})])),_:1},8,["onClick"]),n(q,{class:"wxgroup-list-item",onClick:b.qunless},{default:d((()=>[n(q,{class:"wxgroup-list-icon"},{default:d((()=>[n(q,{class:"wxfont jian"})])),_:1})])),_:1},8,["onClick"])])),_:1}),n(B,{list:b.list3,onItemClick:b.itemClick3},null,8,["list","onItemClick"]),n(q,{class:"wxgroupInfo"},{default:d((()=>[n(q,{class:"xw-tool-list"},{default:d((()=>[n(q,{class:"xw-tool-list-content"},{default:d((()=>[n(q,{class:"xw-tool-item"},{default:d((()=>[n(N,{class:"xw-tool-text"},{default:d((()=>[f("消息免打扰")])),_:1}),n(j,{color:"#05C160",checked:b.Baneddisturb,onChange:e[0]||(e[0]=t=>b.switchChange(t,"xxmdr")),style:{transform:"scale(0.75)"}},null,8,["checked"])])),_:1})])),_:1}),n(q,{class:"xw-tool-list-content"},{default:d((()=>[n(q,{class:"xw-tool-item"},{default:d((()=>[n(N,{class:"xw-tool-text"},{default:d((()=>[f("置顶聊天")])),_:1}),n(j,{color:"#05C160",checked:b.Banedtop,onChange:e[1]||(e[1]=t=>b.switchChange(t,"zdlt")),style:{transform:"scale(0.75)"}},null,8,["checked"])])),_:1})])),_:1}),n(q,{class:"xw-tool-list-content"},{default:d((()=>[n(q,{class:"xw-tool-item"},{default:d((()=>[n(N,{class:"xw-tool-text"},{default:d((()=>[f("保存到通讯录")])),_:1}),n(j,{color:"#05C160",checked:b.BanedkeepGroup,onChange:e[2]||(e[2]=t=>b.switchChange(t,"bcdtxl")),style:{transform:"scale(0.75)"}},null,8,["checked"])])),_:1})])),_:1})])),_:1}),n(q,{class:"xw-tool-list"},{default:d((()=>["Y"==o.detail.master?(c(),l(q,{key:0,class:"xw-tool-list-content",onClick:b.jiesan},{default:d((()=>[n(q,{class:"xw-tool-btn-item"},{default:d((()=>[n(q,{class:"xw-tool-btn-text",style:{color:"#FF5A5F"}},{default:d((()=>[f("解散该群")])),_:1})])),_:1})])),_:1},8,["onClick"])):r("",!0),n(q,{class:"xw-tool-list-content",onClick:b.qingchu},{default:d((()=>[n(q,{class:"xw-tool-btn-item"},{default:d((()=>[n(q,{class:"xw-tool-btn-text",style:{color:"#FF5A5F"}},{default:d((()=>[f("清空群消息")])),_:1})])),_:1})])),_:1},8,["onClick"]),n(q,{class:"xw-tool-list-content",onClick:b.quitqun},{default:d((()=>[n(q,{class:"xw-tool-btn-item"},{default:d((()=>[n(q,{class:"xw-tool-btn-text",style:{color:"#FF5A5F"}},{default:d((()=>[f("删除并退出")])),_:1})])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})):r("",!0)}],["__scopeId","data-v-1ebc722c"]]);export{y as default};
