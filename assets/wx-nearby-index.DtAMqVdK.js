import{Z as s,U as e,f as a,X as t,s as n,n as o,K as l,h as r,c as i,w as c,i as d,o as u,a as p,N as f,O as m,P as x,b as w,t as g,x as k,j as _,d as h,k as y}from"./index-CE7gXyKD.js";import{r as v,_ as N}from"./watermark.Dpp_Cumi.js";import{_ as b}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=b({data:()=>({list:[]}),onLoad(){s({title:"提示",cancelText:"返回",content:"查看附近的人将获取你的位置信息，你的位置信息会被保留一段时间，通过右上角的清除功能可随时手动清除位置信息",success:s=>{s.confirm?this.getlist():s.cancel&&e({delta:1})}})},onShow(){},onUnload(){},methods:{getlist(){a({title:"获取地理位置中"}),t({type:"wgs84",success:s=>{this.$http.request({url:"/near/doNear",method:"POST",data:JSON.stringify({longitude:s.longitude,latitude:s.latitude}),success:s=>{200==s.data.code&&(this.list=s.data.data)}})},fail:s=>{n({title:"请检查定位是否开启",icon:"none",position:"bottom"}),console.log(s.errMsg)}})},goAddfriend(s){o({url:"../personInfo/detail?param="+s.userId+"&source=8"})}},onNavigationBarButtonTap(s){if(0===s.index)l({itemList:["清除位置信息并退出"],success:s=>{if(0===s.tapIndex)this.$http.request({url:"/near/closeNear",success:s=>{200==s.data.code&&e({delta:1})}})}})}},[["render",function(s,e,a,t,n,o){const l=v(r("watermark"),N),b=h,I=y,j=d;return u(),i(j,{class:"wxnearby"},{default:c((()=>[p(l),(u(!0),f(x,null,m(n.list,((e,a)=>(u(),i(j,{class:"wxnearby-item",key:a,onClick:s=>o.goAddfriend(e)},{default:c((()=>[p(j,{class:"person-wx-user"},{default:c((()=>[p(b,{class:"person-wx-avatar",onClick:a=>s.$fc.previewImagesolo(e.portrait),src:e.portrait,mode:"aspectFill"},null,8,["onClick","src"]),p(j,{class:"wxnearby-item-content"},{default:c((()=>[p(j,{class:"person-wx-user-detail"},{default:c((()=>[p(j,{class:"person-wx-nikename"},{default:c((()=>[p(I,{class:"text"},{default:c((()=>[w(g(e.nickName),1)])),_:2},1024),"0"==e.gender?(u(),i(j,{key:0,class:k(["wxfont person-wx-nikename-icon",{nv:"0"==e.gender}])},null,8,["class"])):_("",!0),"1"==e.gender?(u(),i(j,{key:1,class:k(["wxfont person-wx-nikename-icon",{nan:"1"==e.gender}])},null,8,["class"])):_("",!0)])),_:2},1024),p(I,{class:"person-wx-name"},{default:c((()=>[w(" 相距"+g(e.distance)+g(e.distanceUnit),1)])),_:2},1024)])),_:2},1024),e.intro?(u(),i(j,{key:0,class:"person-wx-intor"},{default:c((()=>[w(g(e.intro),1)])),_:2},1024)):_("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})}],["__scopeId","data-v-21729985"]]);export{I as default};
