import{U as r,s as t,h as s,c as e,w as a,i as o,o as i,a as m,b as d,I as u,p as h}from"./index-CE7gXyKD.js";import{r as f,_ as n}from"./watermark.Dpp_Cumi.js";import{_ as c}from"./_plugin-vue_export-helper.BCo6x5W8.js";const l=c({data:()=>({form:{remark:"",userId:""}}),computed:{chatListInfo(){return this.$store.state.chatlist[this.form.userId]}},onLoad(r){this.form.userId=r.userId,this.form.remark=r.remark},methods:{subform(s){var e=JSON.parse(JSON.stringify(this.form));this.$zmmFormCheck.check(e,{remark:{rules:[{checkType:"required",errorMsg:"请填写内容"}]}})?this.$http.request({url:"/friend/remark",method:"POST",data:JSON.stringify(e),success:s=>{if(200==s.data.code){this.chatListInfo.nickName=this.form.remark;var e=JSON.parse(JSON.stringify(this.$store.state.chatDatalist[this.form.userId]));e.fromInfo.nickName=this.form.remark,this.$store.dispatch("updateChatObjById",{userId:this.form.userId,data:e}),this.$store.dispatch("updateChatListInfoById",{userId:this.form.userId,data:this.chatListInfo}),r({delta:1}).then((()=>{t({title:"备注成功",icon:"success"})}))}}}):t({title:this.$zmmFormCheck.error,icon:"none",position:"bottom"})}},onNavigationBarButtonTap(r){if(0===r.index)this.subform()}},[["render",function(r,t,c,l,p,k){const I=f(s("watermark"),n),_=o,b=u,N=h;return i(),e(_,null,{default:a((()=>[m(I),m(N,{onSubmit:k.subform,class:"remarkForm"},{default:a((()=>[m(_,{class:"remarkForm-item"},{default:a((()=>[m(_,{class:"remarkForm-label"},{default:a((()=>[d("备注")])),_:1}),m(b,{class:"remarkForm-input",placeholder:"添加备注",type:"text",modelValue:p.form.remark,"onUpdate:modelValue":t[0]||(t[0]=r=>p.form.remark=r)},null,8,["modelValue"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})}],["__scopeId","data-v-65fad181"]]);export{l as default};
