import{n as s,s as a,_ as t,h as e,c as r,w as l,i,o,a as n,b as u,j as p,N as d,O as m,P as c,a3 as f,a4 as h,I as y,p as _,t as g,d as k,k as b}from"./index-CE7gXyKD.js";import{r as P,_ as q}from"./watermark.Dpp_Cumi.js";import{_ as S}from"./uni-load-more.BYiGPlg5.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=C({data:()=>({queryParams:{refreshing:!1,status:"more",pageNum:1,pageSize:10},form:{param:""},list:[]}),computed:{},onLoad(){},onShow(){this.queryParams.refreshing=!0,this.applyList()},methods:{godetail(a){s({url:"../personInfo/addFriendsDetail?param="+a.applyId+"&type=2"})},agreeApply(s){this.$http.request({url:"/apply/agree",method:"POST",data:JSON.stringify({applyId:s}),success:s=>{200==s.data.code&&(a({title:"已同意",icon:"none"}),this.queryParams.refreshing=!0,this.applyList())}})},applyList(){this.queryParams.status="loading",this.$fc.loadMore({url:"/apply/list?",queryParams:this.queryParams}).then((s=>{if(this.$store.commit("update_friendApply",{}),t("friendApply"),this.queryParams=s.queryParams,"3"!=s.status){if("0"!=s.status){for(var a=s.list,e=[],r=0;r<a.length;r++){var l=a[r];e.push(l)}"2"==s.status&&(this.list=e),"1"==s.status&&(this.list=this.list.concat(e))}}else this.list=[]}))},subform(t){var e=this.form;this.$zmmFormCheck.check(e,{param:{rules:[{checkType:"required",errorMsg:"请填写微聊号/手机号"}]}})?s({url:"../personInfo/addFriendsDetail?param="+this.form.param+"&type=1"}):a({title:this.$zmmFormCheck.error,icon:"none",position:"bottom"})}},onPullDownRefresh(){this.queryParams.refreshing=!0,this.applyList()},onReachBottom(){this.applyList()},onNavigationBarButtonTap(s){if(0===s.index)this.subform()}},[["render",function(s,a,t,C,I,L){const v=P(e("watermark"),q),x=y,j=_,w=i,F=k,N=b,$=P(e("uni-load-more"),S);return o(),r(w,{class:"bgColor"},{default:l((()=>[n(v),n(w,{class:"search-friends"},{default:l((()=>[n(j,{onSubmit:L.subform},{default:l((()=>[n(x,{class:"search-friends-input",placeholder:"请填写微聊号/手机号",modelValue:I.form.param,"onUpdate:modelValue":a[0]||(a[0]=s=>I.form.param=s),type:"text"},null,8,["modelValue"])])),_:1},8,["onSubmit"]),I.list.length>0?(o(),r(w,{key:0,class:"search-friends-list-title"},{default:l((()=>[u("历史")])),_:1})):p("",!0),n(w,{class:"search-friends-list"},{default:l((()=>[(o(!0),d(c,null,m(I.list,((s,a)=>(o(),r(w,{class:"search-friends-list-item",key:a},{default:l((()=>[n(F,{class:"search-friends-list-img",src:s.portrait,mode:"aspectFill",onClick:a=>L.godetail(s)},null,8,["src","onClick"]),n(w,{class:"search-friends-list-user",onClick:a=>L.godetail(s)},{default:l((()=>[n(w,{class:"search-friends-list-username"},{default:l((()=>[u(g(s.nickName),1)])),_:2},1024),n(w,{class:"search-friends-list-remark"},{default:l((()=>[u(g(s.reason),1)])),_:2},1024)])),_:2},1032,["onClick"]),n(w,{class:"search-friends-list-btns"},{default:l((()=>[n(w,{class:"search-friends-list-btn-text"},{default:l((()=>["0"==s.applyStatus?(o(),r(w,{key:0,class:"search-friends-list-btn btn1",onClick:a=>L.agreeApply(s.applyId)},{default:l((()=>[u("接受")])),_:2},1032,["onClick"])):p("",!0),"1"==s.applyStatus?(o(),r(N,{key:1},{default:l((()=>[u("已同意")])),_:1})):p("",!0),"2"==s.applyStatus?(o(),r(N,{key:2},{default:l((()=>[u("已拒绝")])),_:1})):p("",!0),"3"==s.applyStatus?(o(),r(N,{key:3},{default:l((()=>[u("已忽略")])),_:1})):p("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),f(n($,{status:I.queryParams.status},null,8,["status"]),[[h,I.list.length>9]])])),_:1})}],["__scopeId","data-v-7476ba61"]]);export{I as default};
